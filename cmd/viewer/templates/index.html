<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stars Viewer</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #0d1117;
            color: #c9d1d9;
        }
        h1 { color: #f0f6fc; margin-bottom: 20px; }
        .controls {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        input[type="search"] {
            flex: 1;
            min-width: 200px;
            padding: 10px 14px;
            font-size: 16px;
            border: 1px solid #30363d;
            border-radius: 6px;
            background: #161b22;
            color: #c9d1d9;
        }
        input[type="search"]:focus {
            outline: none;
            border-color: #58a6ff;
        }
        select {
            padding: 10px 14px;
            font-size: 14px;
            border: 1px solid #30363d;
            border-radius: 6px;
            background: #161b22;
            color: #c9d1d9;
            cursor: pointer;
        }
        .count {
            color: #8b949e;
            font-size: 14px;
            margin-bottom: 16px;
        }
        .repo {
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 16px;
            margin-bottom: 12px;
            background: #161b22;
        }
        .repo:hover { border-color: #58a6ff; }
        .repo-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        .repo-name {
            font-size: 16px;
            font-weight: 600;
            color: #58a6ff;
            text-decoration: none;
        }
        .repo-name:hover { text-decoration: underline; }
        .repo-desc {
            color: #8b949e;
            font-size: 14px;
            margin-bottom: 12px;
            line-height: 1.5;
        }
        .repo-meta {
            display: flex;
            gap: 16px;
            font-size: 12px;
            color: #8b949e;
            flex-wrap: wrap;
        }
        .repo-meta span { display: flex; align-items: center; gap: 4px; }
        .lang-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }
        .topics {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        .topic {
            background: #388bfd26;
            color: #58a6ff;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
        }
        .htmx-request .loading { display: block; }
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #8b949e;
        }
        .empty {
            text-align: center;
            padding: 40px;
            color: #8b949e;
        }
    </style>
</head>
<body>
    <h1>GitHub Stars</h1>
    <div class="controls">
        <input type="search"
               name="q"
               placeholder="Search repos..."
               hx-get="/search"
               hx-trigger="input changed delay:300ms, search"
               hx-target="#results"
               hx-include="[name='lang'],[name='sort']">
        <select name="lang"
                hx-get="/search"
                hx-trigger="change"
                hx-target="#results"
                hx-include="[name='q'],[name='sort']">
            <option value="">All Languages</option>
            {{range .Languages}}
            <option value="{{.}}">{{.}}</option>
            {{end}}
        </select>
        <select name="sort"
                hx-get="/search"
                hx-trigger="change"
                hx-target="#results"
                hx-include="[name='q'],[name='lang']">
            <option value="starred">Recently Starred</option>
            <option value="pushed">Recently Pushed</option>
            <option value="stars">Most Stars</option>
            <option value="name">Name</option>
        </select>
    </div>
    <div class="loading">Searching...</div>
    <div id="results">
        {{template "results.html" .Results}}
    </div>
</body>
</html>
